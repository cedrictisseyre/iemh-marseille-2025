<?php
// Informations de connexion
$host = 'localhost';      // ou l'adresse du serveur MySQL
$dbname = 'francoisdcls'; 
$username = 'root'; 
$password = 'INNnsk40374';

try {
    // Connexion à la base de données
    $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb3_general_ci", $username, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    echo "Connexion réussie !<br>";

    // Exemple : récupérer toutes les lignes d'une table
    $stmt = $pdo->query("SELECT * FROM nom_de_la_table");

    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        echo "ID: " . $row['id'] . " - Nom: " . $row['nom'] . "<br>";
    }

} catch (PDOException $e) {
    echo "Erreur de connexion : " . $e->getMessage();
}
?>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Explorateur de base de données</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; }
        .tabs { display: flex; border-bottom: 2px solid #333; margin-bottom: 1em; }
        .tab { padding: 10px 20px; cursor: pointer; background: #ddd; border: 1px solid #ccc; border-bottom: none; margin-right: 2px; border-radius: 8px 8px 0 0; }
        .tab.active { background: #fff; font-weight: bold; border-bottom: 2px solid #fff; }
        .tab-content { display: none; background: #fff; border: 1px solid #ccc; padding: 20px; border-radius: 0 8px 8px 8px; }
        .tab-content.active { display: block; }
        table { border-collapse: collapse; width: 100%; margin-top: 1em; }
        th, td { border: 1px solid #aaa; padding: 8px; text-align: left; }
        th { background: #eee; }
    </style>
</head>
<body>
<h1>Explorateur de la base <em><?php echo htmlspecialchars($dbname); ?></em></h1>
<?php
try {
    $tables = $pdo->query("SHOW TABLES")->fetchAll(PDO::FETCH_NUM);
    if (!$tables) {
        echo '<p>Aucune table trouvée dans la base.</p>';
    } else {
        echo '<div class="tabs">';
        foreach ($tables as $i => $table) {
            $active = $i === 0 ? 'active' : '';
            echo '<div class="tab ' . $active . '" data-tab="tab'.$i.'">' . htmlspecialchars($table[0]) . '</div>';
        }
        echo '</div>';
        foreach ($tables as $i => $table) {
            $active = $i === 0 ? 'active' : '';
            $tableName = $table[0];
            echo '<div class="tab-content ' . $active . '" id="tab'.$i.'">';
            $rows = $pdo->query("SELECT * FROM `".$tableName."`")->fetchAll(PDO::FETCH_ASSOC);
            if ($rows && count($rows) > 0) {
                echo '<table><tr>';
                foreach (array_keys($rows[0]) as $col) {
                    echo '<th>' . htmlspecialchars($col) . '</th>';
                }
                echo '</tr>';
                foreach ($rows as $row) {
                    echo '<tr>';
                    foreach ($row as $cell) {
                        echo '<td>' . htmlspecialchars($cell) . '</td>';
                    }
                    echo '</tr>';
                }
                echo '</table>';
            } else {
                echo '<p>Aucune donnée dans cette table.</p>';
            }
            echo '</div>';
        }
    }
} catch (PDOException $e) {
    echo '<p>Erreur lors de la récupération des tables : ' . htmlspecialchars($e->getMessage()) . '</p>';
}
?>
<script>
    const tabs = document.querySelectorAll('.tab');
    const contents = document.querySelectorAll('.tab-content');
    tabs.forEach((tab, i) => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));
            tab.classList.add('active');
            contents[i].classList.add('active');
        });
    });
</script>
</body>
</html>
